{% extends "base2.html" %}

{% block title %}Tienda - Vista Cliente{% endblock %}

{% block content_main %}
  <main class="container py-4">
    <!-- HERO -->
    <section class="hero p-4 p-md-5 mb-4">
      <div class="row align-items-center g-4">
        <div class="col-12 col-md-7">
          <h1 class="fw-bold mb-2">Todo en un solo lugar</h1>
          <p class="lead mb-3">Electrónica, ropa, juguetes, hogar y más. Envío rápido y pagos seguros.</p>
          <div class="d-flex gap-2">
            <a href="#productos" class="btn btn-primary btn-lg"><i class="bi bi-lightning-charge"></i> Comprar ahora</a>
            <a href="#promos" class="btn btn-ghost btn-lg"><i class="bi bi-stars"></i> Ver ofertas</a>
          </div>
          <div class="mt-3 small text-muted">
            <i class="bi bi-truck"></i> Envíos 24–72h · <i class="bi bi-shield-check"></i> Garantía de compra
          </div>
        </div>
        <div class="col-12 col-md-5">
          <img alt="Retail" class="w-100 rounded-3"
               src="https://source.unsplash.com/800x500/?shopping,store,retail">
        </div>
      </div>
    </section>

    <!-- BUSCADOR + CATEGORÍAS + FILTROS LIGHT -->
    <section class="mb-3">
      <div class="row g-2 align-items-center">
        <div class="col-12 col-md-6 search-wrap">
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-search"></i></span>
            <input id="search" type="search" class="form-control" placeholder="Buscar (laptop, polera, lego, TV…)">
            <span class="input-group-text d-none d-md-inline">↵</span>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <select id="sort" class="form-select">
            <option value="featured">Destacados</option>
            <option value="price-asc">Precio: menor a mayor</option>
            <option value="price-desc">Precio: mayor a menor</option>
            <option value="name-asc">Nombre A–Z</option>
          </select>
        </div>
        <div class="col-6 col-md-3 text-end">
          <span class="small text-muted" id="countLabel">0 productos</span>
        </div>
      </div>

      <div class="d-flex flex-wrap gap-2 mt-3" id="categories"><!-- pills via JS --></div>

      <!-- Filtros rápidos -->
      <div class="d-flex flex-wrap gap-2 mt-2" id="quickFilters">
        <span class="filter-chip" data-qf="envio">Envío gratis</span>
        <span class="filter-chip" data-qf="oferta">En oferta</span>
        <span class="filter-chip" data-qf="stock">En stock</span>
      </div>
    </section>

    <!-- PRODUCTOS -->
    <section id="productos" class="mb-4">
      <div class="row g-3" id="grid"><!-- cards via JS --></div>
    </section>

    <!-- OFERTAS -->
    <section id="promos" class="mb-5">
      <div class="card-dark p-3">
        <div class="d-flex align-items-center justify-content-between">
          <h5 class="mb-0">Ofertas de la semana</h5>
          <span class="badge badge-soft px-3 py-2"><i class="bi bi-ticket-perforated"></i> CUPÓN: MEGASALE10</span>
        </div>
        <p class="text-muted mb-0 mt-2">10% adicional en productos seleccionados. Ingresa el cupón al pagar.</p>
      </div>
    </section>

    <!-- CONTACTO -->
    <section id="contacto" class="mb-5">
      <div class="card-dark p-4">
        <h5 class="mb-3">¿Necesitas ayuda?</h5>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nombre</label>
            <input class="form-control" placeholder="Tu nombre">
          </div>
          <div class="col-md-6">
            <label class="form-label">Email</label>
            <input class="form-control" placeholder="tucorreo@ejemplo.com">
          </div>
          <div class="col-12">
            <label class="form-label">Mensaje</label>
            <textarea class="form-control" rows="3" placeholder="Escríbenos…"></textarea>
          </div>
          <div class="col-12">
            <button class="btn btn-primary">Enviar</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="footer py-3">
    <div class="container d-flex flex-wrap justify-content-between align-items-center gap-2">
      <div class="small text-muted">© <span id="y"></span> MultiTienda — Todos los derechos reservados.</div>
      <div class="small">
        <a class="text-muted me-3" href="#">Términos</a>
        <a class="text-muted" href="#">Privacidad</a>
      </div>
    </div>
  </footer>

  <!-- OFFCANVAS CARRITO -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="cart">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title"><i class="bi bi-bag"></i> Tu carrito</h5>
      <button class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column">
      <ul id="cartList" class="list-group list-group-flush mb-3"></ul>
      <div class="mt-auto">
        <div class="d-flex justify-content-between mb-2">
          <span class="fw-semibold">Subtotal</span>
          <span id="subtotal" class="fw-bold">$0</span>
        </div>
        <div class="input-group mb-2">
          <span class="input-group-text"><i class="bi bi-ticket-perforated"></i></span>
          <input id="coupon" class="form-control" placeholder="Ingresa tu cupón">
          <button id="applyCoupon" class="btn btn-ghost">Aplicar</button>
        </div>
        <button id="checkout" class="btn btn-primary w-100"><i class="bi bi-credit-card"></i> Pagar</button>
      </div>
    </div>
  </div>

  <!-- MODAL DETALLE PRODUCTO -->
  <div class="modal fade" id="productModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content card-dark">
        <div class="modal-header">
          <h5 class="modal-title" id="pmName">Producto</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-md-6">
              <img id="pmImg" class="w-100 rounded-3" alt="">
            </div>
            <div class="col-md-6">
              <div class="mb-2">
                <span class="h4 price" id="pmPrice"></span>
                <span class="strike" id="pmOld"></span>
              </div>
              <p class="text-muted" id="pmDesc"></p>
              <div class="mb-2 small"><i class="bi bi-box-seam"></i> <span id="pmStock"></span></div>
              <div class="mb-3 small"><i class="bi bi-truck"></i> <span id="pmShip"></span></div>
              <div class="d-flex align-items-center gap-2 mb-3">
                <label class="small">Cantidad</label>
                <div class="input-group" style="max-width:140px;">
                  <button class="btn btn-ghost" id="pmMinus"><i class="bi bi-dash"></i></button>
                  <input id="pmQty" type="number" class="form-control text-center" min="1" value="1">
                  <button class="btn btn-ghost" id="pmPlus"><i class="bi bi-plus"></i></button>
                </div>
              </div>
              <button class="btn btn-primary" id="pmAdd"><i class="bi bi-bag-plus"></i> Agregar al carrito</button>
              <div class="mt-3 small">
                <span class="badge badge-soft me-1" id="pmCat"></span>
                <span class="badge badge-soft" id="pmTag"></span>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer small text-muted">
          Devoluciones 10 días · Garantía legal 6 meses
        </div>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index:1080">
    <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-transparent border-0">
        <strong class="me-auto">MultiTienda</strong>
        <small class="text-muted">ahora</small>
        <button type="button" class="btn-close ms-2 mb-1" data-bs-dismiss="toast"></button>
      </div>
      <div class="toast-body">Acción realizada.</div>
    </div>
  </div>
{% endblock %}

{% block scripts %}

{% endblock %}
